<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Énigme BR - Terminal</title>
    <style>
      body {
        background: radial-gradient(circle at top left, #060606, #000);
        color: #00ff99;
        font-family: "Courier New", monospace;
        padding: 40px;
        overflow-x: hidden;
      }
      #terminal {
        border: 2px solid #00ff99;
        border-radius: 10px;
        padding: 30px;
        background-color: rgba(0, 0, 0, 0.85);
        box-shadow: 0 0 20px #00ff99;
        max-width: 800px;
        margin: auto;
        line-height: 1.6;
        font-size: 16px;
        color: #c2fcd3;
      }
      .br-letter {
        cursor: pointer;
        transition: color 0.3s, text-shadow 0.3s;
      }
      .br-letter.highlight {
        color: #00ffff !important;
        text-shadow: 0 0 10px #00ffff, 0 0 20px #00ffff !important;
      }

      #answer-section {
        margin-top: 40px;
        text-align: center;
        padding: 20px;
        border-top: 1px solid #00ff99;
      }

      label {
        display: block;
        margin-bottom: 15px;
        color: #00ff99;
        font-size: 18px;
        text-shadow: 0 0 5px #00ff99;
      }

      #answerInput {
        background-color: rgba(0, 255, 153, 0.1);
        border: 2px solid #00ff99;
        border-radius: 5px;
        padding: 12px 20px;
        color: #00ff99;
        font-family: "Courier New", monospace;
        font-size: 16px;
        width: 300px;
        text-align: center;
        outline: none;
        transition: all 0.3s;
        box-shadow: 0 0 10px rgba(0, 255, 153, 0.3);
      }

      #answerInput:focus {
        background-color: rgba(0, 255, 153, 0.2);
        box-shadow: 0 0 20px rgba(0, 255, 153, 0.6);
        transform: scale(1.05);
      }

      #submitBtn {
        margin-left: 15px;
        background-color: rgba(0, 255, 153, 0.2);
        border: 2px solid #00ff99;
        border-radius: 5px;
        padding: 12px 30px;
        color: #00ff99;
        font-family: "Courier New", monospace;
        font-size: 16px;
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: 0 0 10px rgba(0, 255, 153, 0.3);
      }

      #submitBtn:hover {
        background-color: rgba(0, 255, 153, 0.4);
        box-shadow: 0 0 20px rgba(0, 255, 153, 0.8);
        transform: translateY(-2px);
      }

      #submitBtn:active {
        transform: translateY(0);
      }

      .error-message {
        color: #ff0066;
        margin-top: 15px;
        font-size: 14px;
        text-shadow: 0 0 10px #ff0066;
        display: none;
      }

      #timer {
        position: fixed;
        top: 20px;
        left: 20px;
        background-color: rgba(0, 0, 0, 0.85);
        border: 2px solid #00ff99;
        border-radius: 8px;
        padding: 15px 25px;
        font-size: 20px;
        color: #00ff99;
        text-shadow: 0 0 10px #00ff99;
        box-shadow: 0 0 15px rgba(0, 255, 153, 0.5);
        font-weight: bold;
        z-index: 1000;
      }

      #timer.solved {
        border-color: #00ffff;
        color: #00ffff;
        text-shadow: 0 0 15px #00ffff;
        box-shadow: 0 0 25px rgba(0, 255, 255, 0.8);
      }
    </style>
  </head>
  <body>
    <div id="timer">⏱️ 00:00</div>

    <div id="terminal">
      <div id="text"></div>

      <div id="answer-section">
        <label for="answerInput">&gt; ENTREZ VOTRE RÉPONSE :</label>
        <input type="text" id="answerInput" placeholder="???" maxlength="10" />
        <button id="submitBtn">VALIDER</button>
        <div class="error-message" id="errorMsg">❌ ACCÈS REFUSÉ</div>
      </div>
    </div>

    <script>
      // Timer
      let startTime = Date.now();
      let timerInterval;
      const timerDisplay = document.getElementById("timer");

      function updateTimer() {
        const elapsed = Date.now() - startTime;
        const minutes = Math.floor(elapsed / 60000);
        const seconds = Math.floor((elapsed % 60000) / 1000);
        timerDisplay.textContent = `⏱️ ${String(minutes).padStart(
          2,
          "0"
        )}:${String(seconds).padStart(2, "0")}`;
      }

      timerInterval = setInterval(updateTimer, 100);

      const texteOriginal = `OREM IPSUM DOLOR SIT AMET, CONSECTETUR ADIPISCING ELIT. SED DO EIUSMOD TEMPOR INCIDIDUNT UT LABORE ET DOLORE MAGNA ALIQUA. UT ENIM AD MINIM VENIAM, QUIS NOSTRUD EXERCITATION ULLAMCO LABORIS NISI UT ALIQUIP EX EA COMMODO CONSEQUAT. DUIS AUTE IRURE DOLOR IN REPREHENDERIT IN VOLUPTATE VELIT ESSE CILLUM DOLORE EU FUGIAT NULLA PARIATUR. EXCEPTEUR SINT OCCAECAT CUPIDATAT NON PROIDENT, SUNT IN CULPA QUI OFFICIA DESERUNT MOLLIT ANIM ID EST LABORUM. CURABITUR PRETIUM TINCIDUNT LACUS. NULLA GRAVIDA ORCI A ODIO. NULLAM VARIUS, TURPIS ET COMMODO PHARETRA, EST EROS BIBENDUM ELIT, NEC LUCTUS MAGNA FELIS SOLLICITUDIN MAURIS. INTEGER IN MAURIS EU NIBH EUISMOD GRAVIDA. DUIS AC TELLUS ET RISUS VULPUTATE VEHICULA. DONEC LOBORTIS RISUS A ELIT. ETIAM TEMPOR. UT ULLAMCORPER, LIGULA EU TEMPOR CONGUE, EROS EST EUISMOD TURPIS, ID TINCIDUNT SAPIEN RISUS A QUAM. MAECENAS FERMENTUM CONSEQUAT MI. DONEC FERMENTUM. PELLENTESQUE MALESUADA NULLA A MI. DUIS SAPIEN SEM, ALIQUET NEC, COMMODO EGET, CONSEQUAT QUIS, NEQUE. ALIQUAM FAUCIBUS, ELIT UT DICTUM ALIQUET, FELIS NISL ADIPISCING SAPIEN, SED MALESUADA DIAM LACUS EGET ERAT. CRAS MOLLIS SCELERISQUE NUNC. NULLAM ARCU. SED ID ODIO. ALIQUAM LOBORTIS. DONEC LOBORTIS, ERAT SED CURSUS PLACERAT, SAPIEN EROS TEMPOR ERAT, ET TEMPUS IPSUM SEM SED QUAM. VIVAMUS ELEMENTUM SEMPER NISI. AENEAN VULPUTATE ELEIFEND TELLUS. AENEAN LEO LIGULA, PORTTITOR EU, CONSEQUAT VITAE, ELEIFEND AC, ENIM. ALIQUAM LOREM ANTE, DAPIBUS IN, VIVERRA QUIS, FEUGIAT A, TELLUS. PHASELLUS VIVERRA NULLA UT METUS VARIUS LAOREET. QUISQUE RUTRUM. AENEAN IMPERDIET. ETIAM ULTRICIES NISI VEL AUGUE. CURABITUR ULLAMCORPER ULTRICIES NISI. NAM EGET DUI. ETIAM RHONCUS. MAECENAS TEMPUS, TELLUS EGET CONDIMENTUM RHONCUS, SEM QUAM SEMPER LIBERO, SIT AMET ADIPISCING SEM NEQUE SED IPSUM. NAM QUAM NUNC, BLANDIT VEL, LUCTUS PULVINAR, HENDRERIT ID, LOREM. MAECENAS NEC ODIO ET ANTE TINCIDUNT TEMPUS. DONEC VITAE SAPIEN UT LIBERO VENENATIS FAUCIBUS. NULLAM QUIS ANTE. ETIAM SIT AMET ORCI EGET EROS FAUCIBUS TINCIDUNT. DUIS LEO. SED FRINGILLA MAURIS SIT AMET NIBH. DONEC SODALES SAGITTIS MAGNA. SED CONSEQUAT, LEO EGET BIBENDUM SODALES, AUGUE VELIT CURSUS NUNC, QUIS GRAVIDA MAGNA MI A LIBERO. FUSCE VULPUTATE ELEIFEND SAPIEN. VESTIBULUM PURUS QUAM, SCELERISQUE UT, MOLLIS SED, NONUMMY ID, METUS. NULLAM ACCUMSAN LOREM IN DUIS BIBENDUM FELIS SED INTERDUM VENENATIS TURPIS ENIM BLANDIT MI.`;

      const textContainer = document.getElementById("text");

      // Créer le texte avec les spans pour B et R
      let htmlContent = "";
      for (let i = 0; i < texteOriginal.length; i++) {
        const char = texteOriginal[i];
        if (char === "B" || char === "R") {
          htmlContent += `<span class="br-letter">${char}</span>`;
        } else {
          htmlContent += char;
        }
      }

      textContainer.innerHTML = htmlContent;

      // Activer l'effet de survol
      const lettres = document.querySelectorAll(".br-letter");
      console.log("Nombre de lettres B/R trouvées:", lettres.length);

      lettres.forEach((lettre) => {
        lettre.addEventListener("mouseenter", function () {
          console.log("Survol détecté!");
          lettres.forEach((el) => el.classList.add("highlight"));
        });

        lettre.addEventListener("mouseleave", function () {
          lettres.forEach((el) => el.classList.remove("highlight"));
        });
      });

      // Gestion de la validation
      const answerInput = document.getElementById("answerInput");
      const submitBtn = document.getElementById("submitBtn");
      const errorMsg = document.getElementById("errorMsg");

      function checkAnswer() {
        const answer = answerInput.value.trim().toUpperCase();

        if (answer === "BR") {
          // Arrêter le timer
          clearInterval(timerInterval);

          // Calculer le temps final
          const finalTime = Date.now() - startTime;
          const minutes = Math.floor(finalTime / 60000);
          const seconds = Math.floor((finalTime % 60000) / 1000);

          // Bonne réponse - afficher le temps de résolution
          errorMsg.style.display = "none";
          submitBtn.textContent = "✓ ACCÈS ACCORDÉ";
          submitBtn.style.backgroundColor = "rgba(0, 255, 153, 0.6)";

          // Mettre à jour le timer avec le temps final
          timerDisplay.classList.add("solved");
          timerDisplay.textContent = `✓ RÉSOLU EN ${String(minutes).padStart(
            2,
            "0"
          )}:${String(seconds).padStart(2, "0")}`;

          setTimeout(() => {
            window.location.href = "../2/index.html";
          }, 2000);
        } else {
          // Mauvaise réponse
          errorMsg.style.display = "block";
          answerInput.style.borderColor = "#ff0066";
          answerInput.style.boxShadow = "0 0 20px rgba(255, 0, 102, 0.6)";

          setTimeout(() => {
            errorMsg.style.display = "none";
            answerInput.style.borderColor = "#00ff99";
            answerInput.style.boxShadow = "0 0 10px rgba(0, 255, 153, 0.3)";
          }, 2000);
        }
      }

      submitBtn.addEventListener("click", checkAnswer);

      // Permettre la validation avec la touche Entrée
      answerInput.addEventListener("keypress", function (e) {
        if (e.key === "Enter") {
          checkAnswer();
        }
      });
    </script>
  </body>
</html>
